{% extends "UKMDeltaBundle::layout.html.twig" %}
{% trans_default_domain translationDomain %}

{% block content %}
	<div class="container">
		<div class="row">
			<div class="col-12">
				<h1 class="mt-0">Nesten ferdig!</h1>
				{% if status != status_real and status_real == 8 %}
					<div class="alert alert-warning col-xs-10 col-xs-offset-1">
						{{ 'statusAction.obs-men-ok-topptekst'|trans({'%innslag': innslag.get('b_name')}) }}
					</div>		
				{% else %}
					<div class="alert alert-danger col-xs-10 col-xs-offset-1">
						{{ 'statusAction.obs-topptekst'|trans({'%innslag': innslag.get('b_name') }) }}
					</div>
				{% endif %}

				<label>{{ 'statusAction.infotekst'|trans }}</label>
				<br />
                <span class="text-muted">{{ 'statusAction.helper'|trans  }}</span>
				<ul class="list-group">
					{% for kategori, grunner_i_kategori in grunner %}
						{% if kategori == 'personer' %}
							{% for person in grunner_i_kategori %}
								<li class="list-group-item">
									<a href="{{ path('ukm_delta_ukmid_pamelding_personinfo', {k_id: k_id, pl_id: pl_id, type: type, b_id: b_id, p_id: person[0] } ) }}">
										{{ 'mangler.overskrift.person'|trans({'%person': pers[person[0]].get('name') }, 'base') }}
									</a>
									<ul>
										{% for arsak_person in person[1] %}
											<li>{{ ( 'mangler.' ~ arsak_person )|trans({}, 'base') }}</li>
										{% endfor %}
									</ul>
								</li>
							{% endfor %}
						{% elseif kategori == 'titler' %}
							{% if grunner_i_kategori[0] == 'tittel.mangler' %} 
								{# Hvis det ikke finnes noen titler #}
								<li class="list-group-item">
									<a href="{{ path('ukm_delta_ukmid_pamelding_innslag_ny_tittel', { k_id: k_id, pl_id: pl_id, type: type, b_id: b_id }) }}" >
										{{ 'mangler.tittel.mangler'|trans({}, 'base') }}
									</a>
								</li>
							{% else %} {# Hvis det finnes titler i arrayet #}
								{% for tittel in grunner_i_kategori %} {# For hver tittel som mangler noe #}
								<li class="list-group-item">
									<a href="{{ path('ukm_delta_ukmid_pamelding_innslag_rediger_tittel', { k_id: k_id, pl_id: pl_id, type: type, b_id: b_id, t_id: tittel[0] }) }}">
										{{ 'mangler.overskrift.tittel'|trans({'%tittel': t[tittel[0]].get('tittel')}, 'base') }}
									</a>
									<ul>
										{% for arsak_tittel in tittel[1] %}{# For hver feil i hver tittel #}
											<li>{{ ( 'mangler.' ~ arsak_tittel )|trans({}, 'base') }}</li>
										{% endfor %}
									</ul>
								</li>
								{% endfor %}
							{% endif %}
						{% elseif kategori == 'innslag' %}
							{% for arsak in grunner_i_kategori %}
								<li class="list-group-item">
									<a href="{{ path('ukm_delta_ukmid_pamelding_innslag_oversikt', { k_id: k_id, pl_id: pl_id, type: type, b_id: b_id }) }}">
										{{ ( 'mangler.' ~ arsak )|trans({}, 'base' ) }}
									</a>
								</li>
							{% endfor %}
						{% elseif kategori == 'kontakt' %}
							{% for arsak in grunner_i_kategori %}
								<li class="list-group-item">
									<a href="{{ path('ukm_delta_ukmid_contact') }}">
										{{ ( 'mangler.' ~ arsak )|trans({}, 'base' ) }}
									</a>
								</li>
							{% endfor %}
						{% elseif kategori == 'teknisk' %}
							{% for arsak in grunner_i_kategori %}
								<li class="list-group-item">
									<a href="{{ path('ukm_delta_ukmid_pamelding_innslag_teknisk', { k_id: k_id, pl_id: pl_id, type: type, b_id: b_id }) }}">
										{{ ( 'mangler.' ~ arsak )|trans({}, 'base' ) }}
									</a>
								</li>
							{% endfor %}
						{% else %}
							{% for arsak in grunner_i_kategori %}
								<li class="list-group-item">
									{{ ( 'mangler.' ~ arsak )|trans({}, 'base' ) }}
								</li>
							{% endfor %}
						{% endif %}
					{% endfor %}
				</ul>

				<p class="my-4">
					<a class="btn btn-block btn-outline-primary btn-success" href="{{ path('ukm_delta_ukmid_pamelding_innslag_oversikt', { k_id: k_id, pl_id: pl_id, type: type, b_id: b_id }) }}">
						{{ 'statusAction.tilbakeknapp'|trans({},'base') }}
					</a>
				</p>

				<p class="mb-3">
					<a class="btn btn-block btn-default btn-primary" href="{{ path('ukm_delta_ukmid_homepage') }}">
						{{ 'statusAction.videreknapp'|trans({},'base') }}
					</a>
				</p>	
			
				<p>
					{{ 'statusAction.undertekst'|trans({},'base') }}
				</p>
				<p class="text-danger">
					{{ 'statusAction.obstekst'|trans({ '%dag%': frist|dato('l'), '%dato%': frist|dato('d'), '%maned%': frist|dato('F'), '%time%': frist|dato('G'), '%minutt%': frist|dato('i') }, 'base') }}
				</p>
			</div>
		</div>
	</div>
{% endblock %} 